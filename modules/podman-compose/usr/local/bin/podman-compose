#!/bin/bash

docker_compose="/usr/libexec/docker/cli-plugins/docker-compose"

if ! [ -f "$docker_compose" ]
then
	echo "docker-compose binary not found, abort!"
	exit 2
fi

if [ "$(id -u)" -eq 0 ]
then
	PODMAN_SOCKET="/run/podman/podman.sock"
else
	if [ -n "$XDG_RUNTIME_DIR" ]
	then
		PODMAN_SOCKET="$XDG_RUNTIME_DIR/podman/podman.sock"
	else
		PODMAN_SOCKET="/run/user/$(id -u)/podman/podman.sock"
	fi
fi

export PODMAN_SOCKET
export DOCKER_HOST="unix://$PODMAN_SOCKET"

$docker_compose "$@"


